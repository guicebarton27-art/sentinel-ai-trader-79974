# ============================================================
# Sentinel AI Trader - Environment Configuration
# ============================================================
# Copy this file to .env and fill in the values for your environment.
# The app reads from .env automatically via Vite.

# ============================================================
# Supabase Configuration (Required)
# ============================================================
# Get these from your Supabase project dashboard: https://app.supabase.com
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_PUBLISHABLE_KEY=your_publishable_anon_key
VITE_SUPABASE_PROJECT_ID=your_project_id

# ============================================================
# Server-side Supabase keys (For workers/edge functions only)
# ============================================================
# These are only needed if running the worker script locally
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_publishable_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# ============================================================
# Trading API Keys
# ============================================================
# API keys are stored encrypted in the database via the UI.
# These environment variables are NOT used for API key storage.
# KRAKEN_API_KEY=your_kraken_api_key
# KRAKEN_API_SECRET=your_kraken_api_secret

# ============================================================
# Encryption key for stored API secrets (Required for live trading)
# ============================================================
# Generate a secure 32+ character random string for this value.
# Used by edge functions to encrypt/decrypt API keys at rest.
# Example: openssl rand -base64 32
API_ENCRYPTION_KEY=your_32_char_encryption_key

# ============================================================
# Execution Safety Controls
# ============================================================
# CRITICAL: These control whether real trades can be executed
LIVE_TRADING_ENABLED=false
KILL_SWITCH_ENABLED=true

# ============================================================
# Risk Controls
# ============================================================
# Maximum trades allowed per hour (prevents runaway bots)
MAX_TRADES_PER_HOUR=5

# Minutes to wait after a losing trade before next trade
COOLDOWN_MINUTES_AFTER_LOSS=30

# Maximum consecutive losses before bot pauses
MAX_CONSECUTIVE_LOSSES=3

# AI strategy confidence threshold (0-1)
AI_CONFIDENCE_THRESHOLD=0.55

# Enable AI-powered strategy decisions
AI_STRATEGY_ENABLED=true

# ============================================================
# Worker Settings (For external cron runners)
# ============================================================
# Tick interval in milliseconds (default: 60000 = 1 minute)
WORKER_TICK_INTERVAL_MS=60000

# Optional: Override functions URL (e.g., for local development)
# SUPABASE_FUNCTIONS_URL=http://127.0.0.1:54321/functions/v1

# ============================================================
# Alerting (Optional)
# ============================================================
# Configure webhook URLs for critical alerts
# ALERT_WEBHOOK_URL=https://your-webhook-endpoint.com/alerts
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
# DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/WEBHOOK/URL

# ============================================================
# Setup Instructions
# ============================================================
# 1. Create a Supabase project at https://supabase.com
# 2. Copy your project URL and anon key from Settings > API
# 3. Run the database migrations (see supabase/migrations/)
# 4. Generate an encryption key: openssl rand -base64 32
# 5. Set LIVE_TRADING_ENABLED=false for paper trading
# 6. Configure Kraken API keys via the UI (encrypted at rest)
# 7. Start the app: npm run dev
#
# For production:
# 1. Set LIVE_TRADING_ENABLED=true only after thorough testing
# 2. Configure webhook URLs for critical alert notifications
# 3. The pg_cron job handles automated bot execution
# 4. Monitor bot_runs and bot_events tables for execution logs
